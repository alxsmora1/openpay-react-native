{"version":3,"sources":["index.js"],"names":["API_URL_SANDBOX","API_URL_PRODUCTION","vsprintf","sprintfJs","sessionId","toUpperCase","replace","createTokenWithCard","data","method","resource","sendFunction","username","publicKey","url","isProductionMode","merchantId","authorization","Buffer","toString","fetch","mode","cache","headers","body","JSON","stringify","then","response","json","catch","error","Openpay","Component","constructor","props","hasOwnProperty","isBoolean","isString","isFunction","successToken","failToken","custom","deviceSession","isObject","address","identifierForVendor","uri","injectedJavaScript","setState","deviceSerial","window","Expo","Constants","appOwnership","console","log","installationId","deviceId","DeviceInfo","getUniqueId","e","form","cardForm","loading","card","expirationDate","expiration","split","requestData","card_number","number","holder_name","holder","cvv2","cvv","expiration_month","expiration_year","error_code","creditCardRef","React","createRef","validateProps","Error","state","undefined","componentDidMount","createDeviceSessionId","componentWillReceiveProps","nextProps","render","labels","placeholders","handleSubmit","current","submit","tokenize","CardWrapper","Platform","OS","styles","button","buttonText","container","StyleSheet","create","paddingBottom","height","backgroundColor","borderColor","borderWidth","borderRadius","marginBottom","justifyContent","marginTop","padding","width","value","Object","String","isNumber","isFinite","isNull","isUndefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { KeyboardAvoidingView, Platform, StyleSheet, View } from 'react-native';\nimport uuidv4 from 'uuid/v4';\nimport DeviceInfo from 'react-native-device-info';\nimport sprintfJs from 'sprintf-js';\nimport { Buffer } from 'buffer';\nimport WebView from 'react-native-webview';\nimport CreditCard from 'react-native-credit-card-form-ui';\nimport { Button } from 'react-native-elements';\nimport * as Expo from 'react-native';\n\nconst API_URL_SANDBOX = 'https://sandbox-api.openpay.mx';\nconst API_URL_PRODUCTION = 'https://api.openpay.mx';\n\nconst vsprintf = sprintfJs.vsprintf;\nlet sessionId = uuidv4();\nsessionId = sessionId.toUpperCase().replace(/-/g, '');\n\nexport const createTokenWithCard = async (data) => {\n  const method = 'POST';\n  const resource = 'tokens';\n  return await sendFunction(method, resource, data);\n};\n\nconst sendFunction = (method, resource, data) => {\n  const username = data.publicKey;\n  const url = vsprintf('%s/v1/%s/%s', [\n    data.isProductionMode ? API_URL_PRODUCTION : API_URL_SANDBOX,\n    data.merchantId,\n    resource,\n  ]);\n  const authorization =\n    'Basic ' + new Buffer(username + ':').toString('base64');\n\n  return fetch(url, {\n    method: method,\n    mode: 'no-cors',\n    cache: 'no-cache',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': authorization,\n    },\n    body: JSON.stringify(data),\n  })\n    .then((response) => response.json()) // parses response to JSON\n    .catch((error) => {\n      throw error;\n    });\n};\n\nexport default class Openpay extends Component {\n  creditCardRef;\n\n  constructor(props) {\n    super(props);\n\n    this.creditCardRef = React.createRef();\n\n    if (!this.validateProps(props)) {\n      throw new Error('Openpay component requires all the specified props.');\n    }\n    this.state = {\n      sessionId: undefined,\n      uri: '',\n      injectedJavaScript: '',\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this.createDeviceSessionId();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState(() => ({ loading: nextProps.loading }));\n  }\n\n  validateProps = (props) => {\n    // Se valida que existan las propiedad requeridas\n    if (\n      !props.hasOwnProperty('isProductionMode') ||\n      !props.hasOwnProperty('merchantId') ||\n      !props.hasOwnProperty('publicKey') ||\n      !props.hasOwnProperty('successToken') ||\n      !props.hasOwnProperty('failToken') ||\n      !props.hasOwnProperty('custom')\n    ) {\n      return false;\n    }\n\n    // Se validan los tipos de dato\n    if (!isBoolean(props.isProductionMode)) {\n      return false;\n    }\n\n    if (!isString(props.merchantId)) {\n      return false;\n    }\n\n    if (!isString(props.publicKey)) {\n      return false;\n    }\n\n    if (!isFunction(props.successToken)) {\n      return false;\n    }\n\n    if (!isFunction(props.failToken)) {\n      return false;\n    }\n\n    if (!isBoolean(props.custom)) {\n      return false;\n    }\n\n    if (!isBoolean(props.custom)) {\n      return false;\n    } else if (props.custom && !isFunction(props.deviceSession)) {\n      return false;\n    }\n\n    if (props.hasOwnProperty('address') && !isObject(props.address)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  createDeviceSessionId = () => {\n    let identifierForVendor = this.identifierForVendor();\n    identifierForVendor = identifierForVendor.replace(/-/g, '');\n\n    const uri = vsprintf('%s/oa/logo.htm?m=%s&s=%s', [\n      this.props.isProductionMode ? API_URL_PRODUCTION : API_URL_SANDBOX,\n      this.props.merchantId,\n      sessionId,\n    ]);\n    const injectedJavaScript = vsprintf('var identifierForVendor = \"%s\";', [\n      identifierForVendor,\n    ]);\n\n    this.setState(() => ({ uri, injectedJavaScript }));\n    this.props.deviceSession(sessionId);\n  };\n\n  identifierForVendor = () => {\n    let deviceSerial = '';\n    try {\n      if (window.Expo && window.Expo.Constants.appOwnership === 'expo') {\n        console.log('Running in expo');\n        deviceSerial =\n          typeof Expo.Constants.installationId !== 'undefined'\n            ? Expo.Constants.installationId\n            : Expo.Constants.deviceId;\n      } else {\n        deviceSerial = DeviceInfo.getUniqueId();\n      }\n    } catch (e) {\n      console.log('error reading device ID', e);\n    }\n\n    return deviceSerial;\n  };\n\n  tokenize = async (form) => {\n    console.log('******** tokenize ******');\n    const cardForm = form;\n\n    this.setState(() => ({ loading: true }));\n\n    const card = cardForm;\n    const expirationDate = card.expiration.split('/');\n    const requestData = {\n      card_number: card.number.replace(/ /g, ''),\n      holder_name: card.holder,\n      cvv2: card.cvv,\n      expiration_month: expirationDate[0],\n      expiration_year: expirationDate[1],\n      isProductionMode: this.props.isProductionMode,\n      merchantId: this.props.merchantId,\n      publicKey: this.props.publicKey,\n    };\n\n    if (this.props.address) {\n      requestData.address = this.props.address;\n    }\n\n    try {\n      const response = await createTokenWithCard(requestData);\n      if (response.error_code) {\n        this.props.failToken(response);\n      } else {\n        this.props.successToken(response);\n      }\n    } catch (error) {\n      this.props.failToken(error);\n    }\n  };\n\n  render() {\n    const labels = {\n      holder: 'Full Name',\n      expiration: 'Expiration Date',\n      cvv: 'Security Code',\n    };\n\n    const placeholders = {\n      holder: \"Holder's Name\",\n      number: '**** **** **** ****',\n      expiration: 'MM/YY',\n      cvv: 'CVV',\n    };\n\n    const { uri, injectedJavaScript, loading } = this.state;\n\n    const handleSubmit = async () => {\n      if (this.creditCardRef.current) {\n        const { error, data } = this.creditCardRef.current.submit();\n        console.log('ERROR: ', error);\n        console.log('CARD DATA: ', data);\n        await this.tokenize(data);\n      }\n    };\n\n    const CardWrapper = () => {\n      if (!this.props.custom) {\n        return (\n          <KeyboardAvoidingView\n            behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n            keyboardVerticalOffset={20}\n          >\n            <CreditCard\n              ref={this.creditCardRef}\n              labels={labels}\n              placeholders={placeholders}\n            />\n            <Button\n              buttonStyle={styles.button}\n              title={this.props.buttonText}\n              onPress={handleSubmit}\n            />\n          </KeyboardAvoidingView>\n        );\n      } else {\n        return <View />;\n      }\n    };\n\n    return (\n      <View style={styles.container}>\n        <CardWrapper />\n        <WebView\n          source={{ uri: uri }}\n          injectedJavaScript={injectedJavaScript}\n        />\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingBottom: 400,\n  },\n  button: {\n    height: 45,\n    backgroundColor: '#ff8c37',\n    borderColor: '#ff8c37',\n    borderWidth: 1,\n    borderRadius: 8,\n    marginBottom: 5,\n    justifyContent: 'center',\n    marginTop: 30,\n    padding: 5,\n    width: '100%',\n  },\n});\n\nconst isFunction = (value) => {\n  return typeof value === 'function';\n};\n\nconst isObject = (value) => {\n  return value && typeof value === 'object' && value.constructor === Object;\n};\n\nconst isString = (value) => {\n  return typeof value === 'string' || value instanceof String;\n};\n\nconst isBoolean = (value) => {\n  return typeof value === 'boolean';\n};\n\nconst isNumber = (value) => {\n  return typeof value === 'number' && isFinite(value);\n};\n\nconst isNull = (value) => {\n  return value === null;\n};\n\n// Returns if a value is undefined\nconst isUndefined = (value) => {\n  return typeof value === 'undefined';\n};\n"]}